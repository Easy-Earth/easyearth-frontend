/* [1] 기본 레이아웃 & 등급 변수 */
.badgeCard {
  --fx: 0.2;
  position: relative;
  width: 400px;
  height: 120px;
  border-radius: 20px;
  overflow: hidden;
  background: #000;
  display: flex;
  align-items: center;
}

.normal { --fx: 0.20; }
.rare { --fx: 0.55; }
.epic { --fx: 1.0; }
.legendary { --fx: 1.8; }

/* [2] 카드 배경 효과 */
.badgeGlow {
  position: absolute;
  inset: -20%;
  z-index: 0;
  background: radial-gradient(circle at 20% 30%, var(--g1), transparent 55%),
              radial-gradient(circle at 80% 35%, var(--g2), transparent 60%),
              linear-gradient(135deg, rgba(12, 18, 28, 0.96), rgba(8, 30, 34, 0.94));
}
.epic .badgeGlow { animation: epicGlow 3s ease-in-out infinite alternate; }
.legendary .badgeGlow { animation: legendaryRainbow 8s linear infinite; }

.legendary .rays {
  display: block; position: absolute; inset: -60%; z-index: 1;
  background: conic-gradient(from 0deg, transparent 0deg, var(--ring) 45deg, transparent 90deg, var(--g1) 135deg, transparent 180deg, var(--ring) 225deg, transparent 270deg, var(--g2) 315deg, transparent 360deg);
  opacity: 0.7; animation: spin 4s linear infinite, legendaryRainbow 8s linear infinite;
}

.legendary .ring {
  display: block; position: absolute; inset: 6px; z-index: 2; border-radius: 18px;
  background: conic-gradient(from 0deg, var(--ring), transparent, var(--g2), transparent);
  mask: radial-gradient(transparent 63%, #000 66%);
  -webkit-mask: radial-gradient(transparent 63%, #000 66%);
  animation: spin 2.5s linear infinite reverse;
}

/* [3] 칭호 영역 (titleArea) 통합 및 강화 */
.titleArea {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 6px 24px;
  min-width: 170px;
  z-index: 15;
  border-radius: 12px;
  overflow: hidden;
  transition: all 0.3s;
}

.mainTitle {
  font-family: 'GmarketSansBold', 'Pretendard', sans-serif;
  font-weight: 900;
  position: relative;
  z-index: 10;
}

/* --- [Rare]: 은은한 펄감과 네온 테두리 --- */
.rare .titleArea {
  background: linear-gradient(135deg, rgba(0,0,0,0.6), rgba(var(--ring-rgb), 0.2));
  border: 1.5px solid var(--ring);
  box-shadow: 0 0 15px var(--ring), inset 0 0 10px rgba(255,255,255,0.1);
}
.rare .mainTitle { 
  color: #fff; font-size: 16px; 
  text-shadow: 0 0 8px var(--ring); 
}

/* --- [Epic]: 몽환적인 성운(Mist) + 섬광 --- */
.epic .titleArea {
  background: linear-gradient(45deg, #0f0c29, #302b63, #24243e); /* 딥 퍼플/블루 성운톤 */
  border: 1.5px solid #fff;
  box-shadow: 0 0 20px var(--ring), inset 0 0 15px var(--g1);
  animation: epicBloom 3s infinite alternate;
}
/* 에픽 배경: 일렁이는 안개 */
.epic .titleArea::before {
  content: ""; position: absolute; inset: -50%;
  background: radial-gradient(circle at center, var(--ring) 0%, transparent 70%);
  filter: blur(20px); opacity: 0.4; animation: spin 6s linear infinite;
}
/* 에픽 효과: 빠르게 지나가는 / 섬광 */
.epic .titleArea::after {
  content: ""; position: absolute; top: 0; left: -150%; width: 50%; height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent);
  transform: skewX(-30deg); animation: sweep 4s infinite;
}
.epic .mainTitle { 
  font-size: 17px; color: #fff; 
  text-shadow: 0 0 10px #fff, 0 0 20px var(--ring); 
}

/* --- [Legendary]: 쏟아지는 별똥별 비 + 무지개 흐름 --- */
.legendary .titleArea {
  background: #000;
  border: 2px solid #fff;
  box-shadow: 0 0 30px var(--ring), inset 0 0 20px var(--g1);
}
/* 레전더리 배경: 작은 별가루들 */
.legendary .titleArea::before {
  content: ""; position: absolute; inset: 0;
  background-image: 
    radial-gradient(1px 1px at 10% 20%, #fff, transparent),
    radial-gradient(1.5px 1.5px at 50% 50%, #fff, transparent),
    radial-gradient(1px 1px at 80% 80%, #fff, transparent);
  opacity: 0.8;
}
/* 레전더리 효과: 여러 개의 작은 별똥별 낙하 */
.legendary .titleArea::after {
  content: ""; position: absolute; top: -100px; left: -50px; width: 200%; height: 200%;
  /* 여러 개의 유성 꼬리를 멀티 배경으로 구현 */
  background-image: 
    linear-gradient(45deg, #fff 0%, transparent 10%),
    linear-gradient(45deg, #fff 0%, transparent 10%),
    linear-gradient(45deg, #fff 0%, transparent 10%);
  background-size: 4px 60px;
  background-repeat: no-repeat;
  background-position: 20% 10%, 50% 30%, 80% 0%;
  animation: starShower 2s linear infinite;
}
.legendary .mainTitle {
  font-size: 19px;
  background: linear-gradient(to right, #fff, var(--ring), var(--g1), #fff);
  background-size: 200% auto; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  animation: legendaryFlow 2s linear infinite;
  filter: drop-shadow(0 0 12px var(--ring));
}

/* [4] 애니메이션 정의 */
@keyframes sweep { 0% { left: -150%; } 25% { left: 150%; } 100% { left: 150%; } }

/* 별똥별이 비처럼 여러 위치에서 쏟아지는 효과 */
@keyframes starShower {
  0% { transform: translate(0, 0); opacity: 0; }
  10% { opacity: 1; }
  40% { transform: translate(-100px, 100px); opacity: 0; }
  100% { transform: translate(-100px, 100px); opacity: 0; }
}

@keyframes spin { to { transform: rotate(360deg); } }
@keyframes epicBloom { from { filter: brightness(1) saturate(1); } to { filter: brightness(1.3) saturate(1.2); } }
@keyframes legendaryRainbow { 0% { filter: hue-rotate(0deg); } 100% { filter: hue-rotate(360deg); } }
@keyframes legendaryFlow { to { background-position: 200% center; } }
@keyframes epicGlow { from { opacity: 0.7; } to { opacity: 1; } }

/* [5] 유저 정보 레이아웃 (기존 유지) */
.normal .titleArea { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); }
.badgeContent { position: relative; z-index: 10; display: flex; padding: 0 18px; gap: 15px; width: 100%; align-items: center; }
.profileCircle { width: 72px; height: 72px; border-radius: 50%; border: 3px solid #fff; background: var(--b1); overflow: hidden; box-shadow: 0 0 calc(12px * var(--fx)) var(--ring); }
.profileCircle img { width: 100%; height: 100%; object-fit: cover; }
.userName { font-size: 24px; font-weight: 900; color: #fff; text-shadow: 0 0 calc(10px * var(--fx)) var(--ring), 0 2px 8px rgba(0,0,0,0.8); }